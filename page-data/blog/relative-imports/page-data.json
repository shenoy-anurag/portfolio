{"componentChunkName":"component---src-pages-markdown-remark-frontmatter-slug-js","path":"/blog/relative-imports/","result":{"data":{"markdownRemark":{"html":"<h2 id=\"backstory\" style=\"position:relative;\"><a href=\"#backstory\" aria-label=\"backstory permalink\" class=\"custom-class before\"><svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill-rule=\"evenodd\" clip-rule=\"evenodd\"><path d=\"M14.851 11.923c-.179-.641-.521-1.246-1.025-1.749-1.562-1.562-4.095-1.563-5.657 0l-4.998 4.998c-1.562 1.563-1.563 4.095 0 5.657 1.562 1.563 4.096 1.561 5.656 0l3.842-3.841.333.009c.404 0 .802-.04 1.189-.117l-4.657 4.656c-.975.976-2.255 1.464-3.535 1.464-1.28 0-2.56-.488-3.535-1.464-1.952-1.951-1.952-5.12 0-7.071l4.998-4.998c.975-.976 2.256-1.464 3.536-1.464 1.279 0 2.56.488 3.535 1.464.493.493.861 1.063 1.105 1.672l-.787.784zm-5.703.147c.178.643.521 1.25 1.026 1.756 1.562 1.563 4.096 1.561 5.656 0l4.999-4.998c1.563-1.562 1.563-4.095 0-5.657-1.562-1.562-4.095-1.563-5.657 0l-3.841 3.841-.333-.009c-.404 0-.802.04-1.189.117l4.656-4.656c.975-.976 2.256-1.464 3.536-1.464 1.279 0 2.56.488 3.535 1.464 1.951 1.951 1.951 5.119 0 7.071l-4.999 4.998c-.975.976-2.255 1.464-3.535 1.464-1.28 0-2.56-.488-3.535-1.464-.494-.495-.863-1.067-1.107-1.678l.788-.785z\"/></svg></a>Backstory</h2>\n<p>I have been a <a href=\"https://www.jetbrains.com/pycharm/\">PyCharm</a> user for the longest time ever since my team lead introduced it to me at my first job as a software engineer. I feel PyCharm made my life a lot easier and helped to focus on what actually mattered and deliver. However, it also hid some concepts of Python from me as a result of the magic happening behind the scenes to make my life easier.</p>\n<p>One of these is how you can run any file individually, without issues, and without worrying about imports.</p>\n<p>Let's say you have the following folder structure:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">myproject\n├── datastructures\n│   └── linked_list.py\n|   └── stack.py\n|   └── heap.py\n└── algorithms\n|   └── binary_search.py\n|   └── union_find.py\n└── run\n    └── main.py</code></pre></div>\n<p>And imagine the content of main.py is</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> datastructures<span class=\"token punctuation\">.</span>stack <span class=\"token keyword\">import</span> Stack\n\nstack <span class=\"token operator\">=</span> Stack<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nstack<span class=\"token punctuation\">.</span>push<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\nstack<span class=\"token punctuation\">.</span>push<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\nstack<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nstack<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nstack<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>To run <code class=\"language-text\">main.py</code>, in PyCharm, you simply right click anywhere and click on <code class=\"language-text\">Run</code>, or press the play icon.</p>\n<!-- ![play icon symbol](../images/pycharm_run_symbol.png). -->\n<p>In a simple code editor like VS Code or when you are at the terminal however, running <code class=\"language-text\">main.py</code> will result in an error.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Traceback (most recent call last):\n  File \"/Users/username/Projects/myproject/run/main.py\", line 1, in &lt;module>\n    from datastructures.stack import Stack\nModuleNotFoundError: No module named 'datastructures'</code></pre></div>\n<h2 id=\"why-pycharm-doesnt-have-this-problem\" style=\"position:relative;\"><a href=\"#why-pycharm-doesnt-have-this-problem\" aria-label=\"why pycharm doesnt have this problem permalink\" class=\"custom-class before\"><svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill-rule=\"evenodd\" clip-rule=\"evenodd\"><path d=\"M14.851 11.923c-.179-.641-.521-1.246-1.025-1.749-1.562-1.562-4.095-1.563-5.657 0l-4.998 4.998c-1.562 1.563-1.563 4.095 0 5.657 1.562 1.563 4.096 1.561 5.656 0l3.842-3.841.333.009c.404 0 .802-.04 1.189-.117l-4.657 4.656c-.975.976-2.255 1.464-3.535 1.464-1.28 0-2.56-.488-3.535-1.464-1.952-1.951-1.952-5.12 0-7.071l4.998-4.998c.975-.976 2.256-1.464 3.536-1.464 1.279 0 2.56.488 3.535 1.464.493.493.861 1.063 1.105 1.672l-.787.784zm-5.703.147c.178.643.521 1.25 1.026 1.756 1.562 1.563 4.096 1.561 5.656 0l4.999-4.998c1.563-1.562 1.563-4.095 0-5.657-1.562-1.562-4.095-1.563-5.657 0l-3.841 3.841-.333-.009c-.404 0-.802.04-1.189.117l4.656-4.656c.975-.976 2.256-1.464 3.536-1.464 1.279 0 2.56.488 3.535 1.464 1.951 1.951 1.951 5.119 0 7.071l-4.999 4.998c-.975.976-2.255 1.464-3.535 1.464-1.28 0-2.56-.488-3.535-1.464-.494-.495-.863-1.067-1.107-1.678l.788-.785z\"/></svg></a>Why PyCharm doesn't have this problem</h2>\n<p>PyCharm automatically appends the project root to <code class=\"language-text\">sys.path</code> so the application package is visible.</p>\n<p>Compare the way the same <code class=\"language-text\">main.py</code> runs between PyCharm and VS Code.</p>\n<p>Add the following lines of code to the top of <code class=\"language-text\">main.py</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> sys\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>When you run this code in PyCharm, you will see both the parent folder of <code class=\"language-text\">main.py</code> and the sources root folder (i.e. the project root folder, or <em>myproject</em> in the above example). This allows python to add all subfolder of <code class=\"language-text\">myproject</code> as packages and allows one to import using the relative import syntax <code class=\"language-text\">from datastructures.stack import Stack</code>.</p>\n<p>However, in VS Code, you will only see the parent folder of <code class=\"language-text\">main.py</code>. This is why it is unable to see/load the <em>datastructures</em> package.</p>\n<h2 id=\"the-sub-optimal-way-to-solve-this\" style=\"position:relative;\"><a href=\"#the-sub-optimal-way-to-solve-this\" aria-label=\"the sub optimal way to solve this permalink\" class=\"custom-class before\"><svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill-rule=\"evenodd\" clip-rule=\"evenodd\"><path d=\"M14.851 11.923c-.179-.641-.521-1.246-1.025-1.749-1.562-1.562-4.095-1.563-5.657 0l-4.998 4.998c-1.562 1.563-1.563 4.095 0 5.657 1.562 1.563 4.096 1.561 5.656 0l3.842-3.841.333.009c.404 0 .802-.04 1.189-.117l-4.657 4.656c-.975.976-2.255 1.464-3.535 1.464-1.28 0-2.56-.488-3.535-1.464-1.952-1.951-1.952-5.12 0-7.071l4.998-4.998c.975-.976 2.256-1.464 3.536-1.464 1.279 0 2.56.488 3.535 1.464.493.493.861 1.063 1.105 1.672l-.787.784zm-5.703.147c.178.643.521 1.25 1.026 1.756 1.562 1.563 4.096 1.561 5.656 0l4.999-4.998c1.563-1.562 1.563-4.095 0-5.657-1.562-1.562-4.095-1.563-5.657 0l-3.841 3.841-.333-.009c-.404 0-.802.04-1.189.117l4.656-4.656c.975-.976 2.256-1.464 3.536-1.464 1.279 0 2.56.488 3.535 1.464 1.951 1.951 1.951 5.119 0 7.071l-4.999 4.998c-.975.976-2.255 1.464-3.535 1.464-1.28 0-2.56-.488-3.535-1.464-.494-.495-.863-1.067-1.107-1.678l.788-.785z\"/></svg></a>The sub-optimal way to solve this</h2>\n<p>Adding a <code class=\"language-text\">sys.path.append</code> line which adds the specified directory to the python path.</p>\n<p>You could add these two lines to <code class=\"language-text\">main.py</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> sys\nsys<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">'../'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>and when you run <code class=\"language-text\">main.py</code> from within the <code class=\"language-text\">run</code> folder, the import will work correctly.</p>\n<div class=\"gatsby-highlight\" data-language=\"terminal\"><pre class=\"language-terminal\"><code class=\"language-terminal\">(.venv) user@computer-name run % python main.py</code></pre></div>\n<h3 id=\"why-this-is-problematic\" style=\"position:relative;\"><a href=\"#why-this-is-problematic\" aria-label=\"why this is problematic permalink\" class=\"custom-class before\"><svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill-rule=\"evenodd\" clip-rule=\"evenodd\"><path d=\"M14.851 11.923c-.179-.641-.521-1.246-1.025-1.749-1.562-1.562-4.095-1.563-5.657 0l-4.998 4.998c-1.562 1.563-1.563 4.095 0 5.657 1.562 1.563 4.096 1.561 5.656 0l3.842-3.841.333.009c.404 0 .802-.04 1.189-.117l-4.657 4.656c-.975.976-2.255 1.464-3.535 1.464-1.28 0-2.56-.488-3.535-1.464-1.952-1.951-1.952-5.12 0-7.071l4.998-4.998c.975-.976 2.256-1.464 3.536-1.464 1.279 0 2.56.488 3.535 1.464.493.493.861 1.063 1.105 1.672l-.787.784zm-5.703.147c.178.643.521 1.25 1.026 1.756 1.562 1.563 4.096 1.561 5.656 0l4.999-4.998c1.563-1.562 1.563-4.095 0-5.657-1.562-1.562-4.095-1.563-5.657 0l-3.841 3.841-.333-.009c-.404 0-.802.04-1.189.117l4.656-4.656c.975-.976 2.256-1.464 3.536-1.464 1.279 0 2.56.488 3.535 1.464 1.951 1.951 1.951 5.119 0 7.071l-4.999 4.998c-.975.976-2.255 1.464-3.535 1.464-1.28 0-2.56-.488-3.535-1.464-.494-.495-.863-1.067-1.107-1.678l.788-.785z\"/></svg></a>Why this is problematic</h3>\n<p>If you append an absolute path to <code class=\"language-text\">sys.path</code>, then when your project is copied to another computer, it won't work.</p>\n<p>However, given that we are using the relative path <code class=\"language-text\">'../'</code>, this should not be a problem right?? <strong>WRONG</strong></p>\n<p>If you run <code class=\"language-text\">main.py</code> from outside the <code class=\"language-text\">run</code> folder, the import will <strong>FAIL</strong>.</p>\n<p>If you want to run it from <code class=\"language-text\">myproject</code> folder, you will need to change the line</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">sys<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">'../'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>to</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">sys<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>and it will magically work.</p>\n<p>As we can see, our co-worker or another individual wanting to make use of our work, might end up seeing errors and be completely unable to understand why the same command works for us, but not for them.</p>\n<h2 id=\"the-right-way\" style=\"position:relative;\"><a href=\"#the-right-way\" aria-label=\"the right way permalink\" class=\"custom-class before\"><svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill-rule=\"evenodd\" clip-rule=\"evenodd\"><path d=\"M14.851 11.923c-.179-.641-.521-1.246-1.025-1.749-1.562-1.562-4.095-1.563-5.657 0l-4.998 4.998c-1.562 1.563-1.563 4.095 0 5.657 1.562 1.563 4.096 1.561 5.656 0l3.842-3.841.333.009c.404 0 .802-.04 1.189-.117l-4.657 4.656c-.975.976-2.255 1.464-3.535 1.464-1.28 0-2.56-.488-3.535-1.464-1.952-1.951-1.952-5.12 0-7.071l4.998-4.998c.975-.976 2.256-1.464 3.536-1.464 1.279 0 2.56.488 3.535 1.464.493.493.861 1.063 1.105 1.672l-.787.784zm-5.703.147c.178.643.521 1.25 1.026 1.756 1.562 1.563 4.096 1.561 5.656 0l4.999-4.998c1.563-1.562 1.563-4.095 0-5.657-1.562-1.562-4.095-1.563-5.657 0l-3.841 3.841-.333-.009c-.404 0-.802.04-1.189.117l4.656-4.656c.975-.976 2.256-1.464 3.536-1.464 1.279 0 2.56.488 3.535 1.464 1.951 1.951 1.951 5.119 0 7.071l-4.999 4.998c-.975.976-2.255 1.464-3.535 1.464-1.28 0-2.56-.488-3.535-1.464-.494-.495-.863-1.067-1.107-1.678l.788-.785z\"/></svg></a>The right way</h2>\n<p>Enter packages!</p>\n<p>Creating a package out of your code is the right way to solve all these import issues and make your code easier to understand and import.</p>\n<p>Simply turn your folder structure and set of modules into a package.</p>\n<p>Start by adding empty <code class=\"language-text\">__init__.py</code> files to each directory within your project directory.</p>\n<p>Add a <code class=\"language-text\">setup.py</code> file in your project root directory (<em>myproject</em> in the example above).</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> setuptools <span class=\"token keyword\">import</span> find_packages<span class=\"token punctuation\">,</span> setup\n\nsetup<span class=\"token punctuation\">(</span>\n    name<span class=\"token operator\">=</span><span class=\"token string\">'myproject'</span><span class=\"token punctuation\">,</span>\n    packages<span class=\"token operator\">=</span>find_packages<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    version<span class=\"token operator\">=</span><span class=\"token string\">'0.1.0'</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token operator\">=</span><span class=\"token string\">'Data Structures and Algorithms in Python'</span><span class=\"token punctuation\">,</span>\n    author<span class=\"token operator\">=</span><span class=\"token string\">'Anurag'</span><span class=\"token punctuation\">,</span>\n    license<span class=\"token operator\">=</span><span class=\"token string\">'MIT'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Now all you have to do is to change to the directory containing <code class=\"language-text\">setup.py</code> on your terminal and run:</p>\n<div class=\"gatsby-highlight\" data-language=\"terminal\"><pre class=\"language-terminal\"><code class=\"language-terminal\">pip install -e .</code></pre></div>\n<p>Voila!</p>\n<p>You have succesfully installed your project as a package.</p>\n<p>The <code class=\"language-text\">-e</code> flag ensures any changes you make to the code is reflected in the package as soon as the file is saved. This is for development mode, or editable mode, or <em>e</em> for short. Read more here: <a href=\"https://setuptools.pypa.io/en/latest/userguide/development_mode.html\">https://setuptools.pypa.io/en/latest/userguide/development_mode.html</a></p>\n<p>Now, you can import any module within your project using the following structure:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> package_name<span class=\"token punctuation\">.</span>directory<span class=\"token punctuation\">.</span>subdirectory<span class=\"token punctuation\">.</span>module <span class=\"token keyword\">import</span> MyClass</code></pre></div>\n<p>In our example, we can import the stack class using the following import:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> myproject<span class=\"token punctuation\">.</span>datastructures<span class=\"token punctuation\">.</span>stack <span class=\"token keyword\">import</span> Stack</code></pre></div>\n<p>If you want to deep-dive into how imports work in Python, read more about relative imports here: <a href=\"https://stackoverflow.com/a/14132912/10052646\">https://stackoverflow.com/a/14132912/10052646</a></p>\n<h2 id=\"references-and-further-reading\" style=\"position:relative;\"><a href=\"#references-and-further-reading\" aria-label=\"references and further reading permalink\" class=\"custom-class before\"><svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill-rule=\"evenodd\" clip-rule=\"evenodd\"><path d=\"M14.851 11.923c-.179-.641-.521-1.246-1.025-1.749-1.562-1.562-4.095-1.563-5.657 0l-4.998 4.998c-1.562 1.563-1.563 4.095 0 5.657 1.562 1.563 4.096 1.561 5.656 0l3.842-3.841.333.009c.404 0 .802-.04 1.189-.117l-4.657 4.656c-.975.976-2.255 1.464-3.535 1.464-1.28 0-2.56-.488-3.535-1.464-1.952-1.951-1.952-5.12 0-7.071l4.998-4.998c.975-.976 2.256-1.464 3.536-1.464 1.279 0 2.56.488 3.535 1.464.493.493.861 1.063 1.105 1.672l-.787.784zm-5.703.147c.178.643.521 1.25 1.026 1.756 1.562 1.563 4.096 1.561 5.656 0l4.999-4.998c1.563-1.562 1.563-4.095 0-5.657-1.562-1.562-4.095-1.563-5.657 0l-3.841 3.841-.333-.009c-.404 0-.802.04-1.189.117l4.656-4.656c.975-.976 2.256-1.464 3.536-1.464 1.279 0 2.56.488 3.535 1.464 1.951 1.951 1.951 5.119 0 7.071l-4.999 4.998c-.975.976-2.255 1.464-3.535 1.464-1.28 0-2.56-.488-3.535-1.464-.494-.495-.863-1.067-1.107-1.678l.788-.785z\"/></svg></a>References and Further Reading</h2>\n<ol>\n<li>StackOverflow: Relative imports for the billionth time <a href=\"https://stackoverflow.com/questions/14132789/relative-imports-for-the-billionth-time\">https://stackoverflow.com/questions/14132789/relative-imports-for-the-billionth-time</a></li>\n<li>StackOverflow: Importing files from another folder <a href=\"https://stackoverflow.com/questions/4383571/importing-files-from-different-folder\">https://stackoverflow.com/questions/4383571/importing-files-from-different-folder</a></li>\n<li>StackOverflow: Automtically add to sys.path like PyCharm <a href=\"https://stackoverflow.com/questions/75990606/automatically-add-project-to-sys-path-in-vs-code-like-pycharm-spyder-do\">https://stackoverflow.com/questions/75990606/automatically-add-project-to-sys-path-in-vs-code-like-pycharm-spyder-do</a></li>\n<li>Packaging Python Projects <a href=\"https://packaging.python.org/en/latest/tutorials/packaging-projects/\">https://packaging.python.org/en/latest/tutorials/packaging-projects/</a></li>\n</ol>","frontmatter":{"date":"May 10, 2023","slug":"/blog/relative-imports","title":"Relative Imports & Python Packages"}}},"pageContext":{"id":"ddce8a89-258d-5917-85a7-ca89cef746eb","frontmatter__slug":"/blog/relative-imports","__params":{"frontmatter__slug":"blog"}}},"staticQueryHashes":["63159454"]}